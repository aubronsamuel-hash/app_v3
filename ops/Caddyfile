# Local development proxy. HTTPS intentionally disabled to avoid certificate prompts on Windows.

:80 {
  encode gzip

  @api path /api/*
  handle @api {
    header_up Host {http.request.host}
    header_up X-Forwarded-For {http.request.remote}
    header_up X-Forwarded-Proto {http.request.proto}
    handle_path /api/* {
      reverse_proxy api:8001
    }
  }

  handle_path /_proxy/health* {
    respond "ok" 200
  }

  handle {
    reverse_proxy frontend:5173
  }
}
